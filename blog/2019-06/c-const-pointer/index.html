<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, maximum-scale=1" />
  <meta name="author" content="Qian Qu">
  <meta name="description" content="It is the first blog to talk about c&#43;&#43; pointer and const.">
  
  <meta property="og:title" content="C&#43;&#43;: const &amp; pointer" />
<meta property="og:description" content="It is the first blog to talk about c&#43;&#43; pointer and const." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://quq99.github.io/blog/2019-06/c-const-pointer/" />
<meta property="article:published_time" content="2019-06-26T20:14:59&#43;08:00"/>
<meta property="article:modified_time" content="2019-06-26T20:14:59&#43;08:00"/>



  <title>
  
       C&#43;&#43;: const &amp; pointer | Qian Qu 
  
  </title>

  <link rel="canonical" href="https://quq99.github.io/blog/2019-06/c-const-pointer/">

  
  

  
  <link href="https://quq99.github.io/css/vendors-extensions/fontawesome/all.min.css" rel="stylesheet">

  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Ubuntu+Mono:400,400i,700,700i|Raleway:300,400,500,600">
  <link href="https://quq99.github.io/css/font.css" rel="stylesheet"> 
    
  
  <link href="https://quq99.github.io/css/vendors/bootstrap4/bootstrap.min.css" rel="stylesheet">
  <link href="https://quq99.github.io/css/vendors-extensions/mdb/mdb.min.css" rel="stylesheet"> 
  <link href="https://quq99.github.io/css/vendors/mdb/style.min.css" rel="stylesheet"> 
  <link href="https://quq99.github.io/css/main.css" rel="stylesheet">


  
  <link rel="shortcut icon"
  
      href="https://quq99.github.io/img/qu2.png"
  
  >


  
  

  <style type="text/css">
      @media (min-width: 800px) and (max-width: 850px) {
              .navbar:not(.top-nav-collapse) {
                  background: #1C2331!important;
              }
          }
  </style>


  
    
    <link rel="stylesheet" href="https://quq99.github.io/js/vendors/katex/katex.min.css">
  
  

  
    
    <link rel="stylesheet" href="https://quq99.github.io/css/vendors/highlight/github-gist.css">
  

</head>

  <body class="bg-light" data-spy="scroll" data-target="#page-scrollspy" data-offset="90">
  
    
    

    
      


<nav class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar">
    <div class="container">

      
      <a class="navbar-brand" href="https://quq99.github.io">
          
        <img class="avatar" src="https://quq99.github.io/img/qu2.png" style="width: 40px!important;height: auto;"  class="d-inline-block align-top" alt="" >
        
        <strong> Qian Qu</strong>
      </a>

      
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
        aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      
      <div class="collapse navbar-collapse" id="navbarSupportedContent">

        
        <ul class="navbar-nav mr-auto ">
          <li class="nav-item ">
            <a class="nav-link" href="https://quq99.github.io">Home</a>
          </li>
             
            <li class="nav-item ">
              <a class="nav-link" href="https://quq99.github.io/blog/" >Blog  </a>
            </li>
          
             
            <li class="nav-item ">
              <a class="nav-link" href="https://quq99.github.io/resume/" >Resume  </a>
            </li>
          
             
            <li class="nav-item ">
              <a class="nav-link" href="https://quq99.github.io/about/" >About  </a>
            </li>
          
          
        </ul>

      </div>

    </div>
  </nav>
  
 
      
 






<div id="site-header" class="carousel slide carousel-fade" data-ride="carousel" style="height: 18rem;" >  

  
  
  

  
  <div class="carousel-inner" role="listbox">
    
      

        
        <div class="carousel-item active">
          <div class="view" style="background-image: url('https://quq99.github.io/img/header-slides/223990.jpg'); background-repeat: no-repeat; background-size: cover;">

            
            <div class="mask rgba-black-light d-flex justify-content-center align-items-center">

              
              
              

            </div>
            

          </div>
        </div>
        
      
    
      

        
        <div class="carousel-item">
          <div class="view" style="background-image: url('https://quq99.github.io/img/header-slides//23827.jpg'); background-repeat: no-repeat; background-size: cover;">

            
            <div class="mask rgba-black-light d-flex justify-content-center align-items-center">

            

            </div>
            

          </div>
        </div>
        
      
    
      

        
        <div class="carousel-item">
          <div class="view" style="background-image: url('https://quq99.github.io/img/header-slides//chi-liu-1552956-unsplash.jpg'); background-repeat: no-repeat; background-size: cover;">

            
            <div class="mask rgba-black-light d-flex justify-content-center align-items-center">

            

            </div>
            

          </div>
        </div>
        
      
    
      

        
        <div class="carousel-item">
          <div class="view" style="background-image: url('https://quq99.github.io/img/header-slides//wallhaven-716074.jpg'); background-repeat: no-repeat; background-size: cover;">

            
            <div class="mask rgba-black-light d-flex justify-content-center align-items-center">

            

            </div>
            

          </div>
        </div>
        
      
    
      

        
        <div class="carousel-item">
          <div class="view" style="background-image: url('https://quq99.github.io/img/header-slides//wallhaven-763507.jpg'); background-repeat: no-repeat; background-size: cover;">

            
            <div class="mask rgba-black-light d-flex justify-content-center align-items-center">

            

            </div>
            

          </div>
        </div>
        
      
    

  
  </div>
  

  
  <div class="carousel-content text-center white-text wow fadeIn">
    <div class="row mx-0 headfont mt-3 pt-4">
      
      <div class="col-12 col-sm-5 align-middle">
        <a href="https://quq99.github.io">
          
            <img class="pull-right avatar avatar-md" src="https://quq99.github.io/img/profile2.jpg" alt="" >
          
        </a>
      </div>
      
      <div class="col-12 col-sm-7 text-left pl-2">
        <a href="https://quq99.github.io">
          <h1 class="mb-2 h1" style="font-weight: 300;" >
            <strong>Qian Qu</strong>
          </h1>
        </a>
        

             
        <div class="mt-2" style="font-size: 1rem; color: white;">
            
              <a href="//github.com/quq99" target="_blank" rel="noopener"><i class="fab fa-github pr-1" aria-hidden="true"></i></a>    
            
            
              <a href="//linkedin.com/in/qian-qu-2608b2170" target="_blank" rel="noopener"><i class="fab fa-linkedin pr-1" aria-hidden="true"></i></a>
            

            

            

            

            
    
            
    
        
            
                <a href="mailto:qq8jn@virginia.edu"><i class="far fa-envelope-open pr-1" aria-hidden="true"></i></a>
            
    
            

            
        </div>
      </div>
    </div>
  </div>
  

  
  
  

</div>
  
    

    
  
  <main class="post-main-wrapper">
    
    
    <div class="row">

      

      
      <div class="col-md-10">
      

        
        <div class="z-depth-1  post-wrapper white-bg single-post">

          <div class="post-header text-center" >
  <ul class="post-meta li-x">
    
      
        <li><a href="https://quq99.github.io/categories/language"><i class="fas fa-folder-open pr-1" aria-hidden="true"></i> Language </a></li>
      
    
    
      
        <li><a href="https://quq99.github.io/series/my_c&#43;&#43;_journey"><i class="fas fa-bookmark pr-1" aria-hidden="true"></i>my_c&#43;&#43;_journey</a></li>
      
    
  </ul>

  <div class="px-4 post-heading">C&#43;&#43;: const &amp; pointer</div>

  <ul class="post-meta li-x mt-1">
    
      <li>Jun 26, 2019</li>
    

    
      <li class="middot"></li>
      <li>5 minutes read</li>
    
  </ul>
  
    <div class="view">
      <img src="https://quq99.github.io/images/blog/series/my_c&#43;&#43;_journey/2019-06/cover.png" />
    </div>
  

</div>


          <div class="post-content markdown">
            

<p>Using <strong><em>const</em></strong> key word with a pointer has subtle aspects and it is worth talking about it.</p>

<h1 id="point-to-const-or-const-pointer"><em>Point-to-const</em> or <em>const pointer</em></h1>

<p>You can use the <strong><em>const</em></strong> keyword in two different ways with pointers.</p>

<blockquote>
<p>The first way is to make a pointer point to a constant object, and that prevents you from using the pointer to change the pointed-to value.</p>

<p>The second way is to make the pointer itself constant, and that prevents you from changing where the pointer points.</p>
</blockquote>

<p>This words are subtle and confusing the first time I read them especially after I read some examples about assignment and changeability. However, once I know the purpose of using <strong><em>const</em></strong> key word, things become crystal clear.</p>

<p>So, why are we using <strong><em>const</em></strong> to pointer? The answer is simple: we want to protect the data. Specifically, the data could be value or address. So when you use the <strong><em>const</em></strong> key word, you should ask yourself the question first, which one would you want to protect, the value or the address?</p>

<p>If you want to protect the value, you should make a pointer point to a constant object. You tell the compiler, this pointer point to some value that you&rsquo;d better not make a change. It means even you have the pointer, you can not change the value through pointer,  because the value is now protected.</p>

<p>If you want to protect the address, you should make the pointer itself constant. You tell the compiler this pointer is binding to some address and you&rsquo;d better not change it. It is more like binding the relationship between the pointer and the value it point to.</p>

<h1 id="examples">Examples</h1>

<h2 id="pointer-to-constant">pointer to constant</h2>

<ul>
<li>Example 1</li>
</ul>

<blockquote>
<p>assigning the address of a const variable to a pointer-to-const.</p>
</blockquote>

<pre><code class="language-c++">const float value = 9.80;
const float * ptr = &amp;value;
</code></pre>

<p>you can use neither value nor ptr to change the value 9.80. You can not do the following things</p>

<pre><code class="language-c++">*ptr += 1; //invalid, you can't change value
cin &gt;&gt; *ptr; // invalid, you can't assign the value
value = 3.0; // invalid, value is a constant variable
</code></pre>

<ul>
<li>Example 2</li>
</ul>

<blockquote>
<p>assigning the address of a regular variable to a pointer-to-const.</p>
</blockquote>

<pre><code class="language-c++">int value = 50;
const int * ptr = &amp;value;
</code></pre>

<p>you can not use ptr to change the value 50, but you can directly change the value through variable &ldquo;value&rdquo;. You can not do the following things</p>

<pre><code class="language-c++">*ptr += 1; //invalid, you can't change value through pointer
cin &gt;&gt; *ptr; // invalid, you can't assign the value through pointer
value = 3; // valid, value is regular variable
</code></pre>

<p>This case is tricky. It is often used in the cases which you have a function and pass a pointer as the argument. In this case, you do not want the function to change the value that the pointer point to. You want to protect the value, how can you do that? Right, let the pointer be a pointer-to-const.</p>

<pre><code class="language-c++">int a = 20;
const int *ptr = &amp;a;
int func(const int *ptr, some_other_parameters) {
    //do something
    //because the ptr is point to constant
    //variable 'a' would not change.
    return 0;
}
</code></pre>

<ul>
<li>Example 3</li>
</ul>

<blockquote>
<p>assigning the address of a const to a regular pointer.</p>
</blockquote>

<p>This is prohibit in c++, because you can use a regular pointer to change the value it point to, however, if the value is decleared constant, it comes to a contradiction.</p>

<pre><code class="language-c++">const int value = 50;
int * ptr = &amp;value; // INVALID
</code></pre>

<ul>
<li>Example 4</li>
</ul>

<blockquote>
<p>assign the address of a regular pointer to a pointer-to-const</p>
</blockquote>

<p>This is not safe. Not recommend.</p>

<pre><code class="language-c++">const int **pp2;
int *p1;
const int n = 13;
pp2 = &amp;p1; // not allowed, but suppose it were
*pp2 = &amp;n; // valid, both const, but sets p1 to point at n
*p1 = 10; // valid, but changes const n
</code></pre>

<p>So to wrap up,</p>

<blockquote>
<p>You can assign the address of either const data or non-const data to a pointer-to-const, provided that the data type is not itself a pointer, but you can assign the address of non-const data only to a non-const pointer.</p>
</blockquote>

<ul>
<li>Example 5</li>
</ul>

<blockquote>
<p>ok to change the pointer itself, can change to point to another value</p>
</blockquote>

<pre><code class="language-c++">int value = 50;
const int * ptr = &amp;value;
int another_value = 80;
ptr = &amp;another_value; // *ptr is now 80
</code></pre>

<p>It just protect the value, you can not change the value through pointer, but it does not protect the address(pointer itself), you can change the address to point to another value.</p>

<h2 id="make-the-pointer-itself-constant">make the pointer itself constant</h2>

<ul>
<li>Example</li>
</ul>

<pre><code class="language-c++">int value = 20;
int *const ptr = &amp;value; // ptr is binding to the address of value
int another = 3;
ptr = &amp;another; // INVALID
</code></pre>

<p>Ptr restrain to the address of value.</p>

<p>Here is a picture from book &ldquo;<strong>C++ Primer Plus</strong>&rdquo;.</p>

<p><img src="https://quq99.github.io/images/blog/series/my_c++_journey/2019-06/constandptr.png" alt="const pointer and pointer to const" /></p>

<h1 id="const-pointer-that-point-to-a-const-object">Const pointer that point to a const object</h1>

<p>If you like, you can declare a const pointer to a const object which combines the properties above:</p>

<pre><code class="language-c++">double trouble = 2.0E30;
const double * const ptr = &amp;trouble;
</code></pre>

<p>Here ptr can point only to trouble, and ptr cannot be used to change the value of trouble. In short, both <code>ptr</code> and <code>*ptr</code> are const.</p>

          </div>

          
          <div class="row">
            <div class="col-md-8">
            
              <div class="mb-5">
                
<div class="li-x div-x post-meta">
  <li class="pr-0"><a href="https://quq99.github.io/tags/"><i class="fas fa-tags"></i></a></li>
  <div class="tags-sm">
    
      <li><a href="https://quq99.github.io/tags/c&#43;&#43;" role="button">C&#43;&#43; </a></li>
      
    
      <li><a href="https://quq99.github.io/tags/blog" role="button">blog </a></li>
      
    
      <li><a href="https://quq99.github.io/tags/pointer" role="button">pointer </a></li>
      
    
      <li><a href="https://quq99.github.io/tags/const" role="button">const </a></li>
      
    
  </div>
</div>
              </div>
            
            </div>
            
          </div>
          

          
          <div class="row pt-3">
            <div class="col-md-6">
              
                <a href=https://quq99.github.io/blog/2019-06/vim-plugin-manager/ class="post-meta">Previous
                  <div class="pt-2 pb-5 d-flex">
                    <i class="fas fa-angle-left text-grey font-weight-bold mr-2 active-color"></i>
                    <span>Vim plugin manager</span>
                  </div>
                </a>
              
            </div>
            
            <div class="col-md-6 text-right" >
              
            </div>
          </div>

          

        </div>
        

      </div>
      

      
	
	
	
	
		
		
		
	

		
		<div class="col-md-2 pl-0">

			
			<div id="page-scrollspy" class="toc-nav">
				
				<ul class="nav nav-pills ml-0">
					
					<li class="nav-item pb-3 text-center">
						<span class="font-weight-bold mb-2">- CATALOG - </span>
					</li>

					
						
						
							
								
								
									<ul class="nav">
								
								

										<li class="nav-item">
						 					<a class="nav-link" href="#point-to-const-or-const-pointer">
												 Point-to-const or const pointer
											</a>
										</li>
						 
								
								
									</ul>
								
							
						
				 
						
						
							
								
								
									<ul class="nav">
								
								

										<li class="nav-item">
						 					<a class="nav-link" href="#examples">
												 Examples
											</a>
										</li>
						 
								
								
									</ul>
								
							
						
				 
						
						
							
								
								
									<ul class="nav">
								
									<ul class="nav">
								
								

										<li class="nav-item">
						 					<a class="nav-link" href="#pointer-to-constant">
												 pointer to constant
											</a>
										</li>
						 
								
								
									</ul>
								
									</ul>
								
							
						
				 
						
						
							
								
								
									<ul class="nav">
								
									<ul class="nav">
								
								

										<li class="nav-item">
						 					<a class="nav-link" href="#make-the-pointer-itself-constant">
												 make the pointer itself constant
											</a>
										</li>
						 
								
								
									</ul>
								
									</ul>
								
							
						
				 
						
						
							
								
								
									<ul class="nav">
								
								

										<li class="nav-item">
						 					<a class="nav-link" href="#const-pointer-that-point-to-a-const-object">
												 Const pointer that point to a const object
											</a>
										</li>
						 
								
								
									</ul>
								
							
						
				 

				</ul>
			</div>
			

		</div>
		
	

    </div>
    


  </main>
  


    
    

<footer class="page-footer text-center font-small mt-4 wow fadeIn">


  
  <div class="pb-2 mt-5 pt-5">
    
      <a href="//github.com/quq99 " target="_blank" rel="noopener"><i class="fab fa-github mr-3" aria-hidden="true"></i></a>    
    
    
      <a href="//linkedin.com/in/qian-qu-2608b2170" target="_blank" rel="noopener"><i class="fab fa-linkedin-in mr-3" aria-hidden="true"></i></a>
    

    

    

    

    

    


    
        <a href="mailto:qq8jn@virginia.edu"><i class="far fa-envelope-open mr-3" aria-hidden="true"></i></a>
    

    

    

  </div>
  

  
  <div class="copyright py-4">
    
    <span>  2016 - 2019 &copy; | Theme <a href='https://github.com/orianna-zzo/AllinOne' target="_blank">AllinOne</a> by <a href='https://github.com/orianna-zzo' target="_blank">Orianna</a>  </span>
  </div>
  

</footer>


    






<script type="text/javascript" src="https://quq99.github.io/js/vendors/jquery/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="https://quq99.github.io/js/vendors/jquery/jquery.smooth-scroll.min.js"></script>



<script type="text/javascript" src="https://quq99.github.io/js/vendors/popper.min.js"></script>
<script type="text/javascript" src="https://quq99.github.io/js/vendors/holder.min.js"></script>
<script type="text/javascript" src="https://quq99.github.io/js/vendors-extensions/bootstrap4/bootstrap.js" ></script>

<script type="text/javascript" src="https://quq99.github.io/js/vendors/mdb/mdb.min.js"></script>

<script type="text/javascript" src="https://quq99.github.io/js/main.js"></script>



  
  <script src="https://quq99.github.io/js/vendors/highlight.pack.js"> </script>
  <script>hljs.initHighlightingOnLoad();</script>




 
  <script src="https://quq99.github.io/js/vendors/katex/katex.min.js"> </script>
  <script src="https://quq99.github.io/js/vendors/katex/contrib/auto-render.min.js"></script>

  <script>
      document.addEventListener("DOMContentLoaded", function () {
          renderMathInElement(document.body);
      });
  </script>








<script type="text/javascript">
  
  new WOW().init();
</script>




  </body>
</html>